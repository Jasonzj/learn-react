<!DOCTYPE html>
<html>
  <head>
    <script src="../build/react.js"></script>
    <script src="../build/react-dom.js"></script>
    <script src="../build/browser.min.js"></script>
    <script src="../build/jquery.min.js"></script>
  </head>
  <body>
    <div id="example"></div>
    <script type="text/babel">
    // var UserGist = React.createClass({
    //     getInitialState: function() {
    //         return {
    //             username: '',
    //             lastGistUrl: ''
    //         };
    //     },

    //     componentDidMount: function() {
    //         $.get(this.props.source, function(result) {
    //             var lastGist = result[0];
    //             if (this.isMounted()) {
    //                 this.setState({
    //                     username: lastGist.owner.login,
    //                     lastGistUrl: lastGist.html_url
    //                 });
    //             }
    //         }.bind(this));
    //     },

    //     render: function() {
    //         return (
    //         <div>
    //             {this.state.username}'s last gist is <a href={this.state.lastGistUrl}>here</a>.
    //         </div>
    //         );
    //     }
    // });

    // ReactDOM.render(
    //     <UserGist source="https://api.github.com/users/octocat/gists" />,
    //     document.getElementById('example')
    // );

    const UserGist = React.createClass({
        getInitialState() {
            return {
                username: '',
                lastGistUrl: ''
            }
        },
        componentDidMount() {
            $.get(this.props.source, (result) => {
                const lastGist = result[0]
                if (this.isMounted()) {
                    this.setState({
                        username: lastGist.name,
                        lastGistUrl: lastGist.image.large
                    })
                }
            })
        },
        render() {
            return (
                <div>
                    {this.state.username}'s last gist is <a href={this.state.lastGistUrl}>here</a>
                </div>
            )
        }
    })

    ReactDOM.render(
        <UserGist source="http://www.jasonzj.me:4000/?&page=1" />,
        document.getElementById('example')
    );
    </script>
  </body>
</html>
